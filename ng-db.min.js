!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=t(1),i=r(o),u=t(2),c=r(u),a=t(3),s=r(a),l=t(4),f=r(l),d=t(5),v=r(d);angular.module("ngDb",[]).constant("NG_DB_VERSION","0.0.1").service("$ngDbEvents",function(){return c.default}).service("$ngDbUtils",i.default).service("$qs",s.default).service("$iDb",f.default).service("$iModel",v.default)},function(e,n){"use strict";function t(e){"ngInject";function n(e,n){return"function"==typeof e||null==e||void 0==e}function t(e){if(!n(e)){var t=new Error("Invalid callback");throw t.name="InvalidCallback",t}}function o(e,n){"string"==typeof n&&(n=[n]);for(var t in n)if(("undefined"==typeof e?"undefined":r(e))==n[t])return;var o=new Error("Invalid value: "+e+" must be "+n.join(" or "));throw o.name="InvalidValue",o}function i(e,n){e=Array.prototype.slice.call(e),"string"==typeof n&&(n=[n]);for(var t in e)if(n[t]){if(null==n[t])continue;if("string"==typeof n[t]||"object"==r(n[t])){o(e[t],n[t]);continue}if("funcion"==typeof n[t]){n[t](e[t]);continue}var i=new Error("Invalid validator to: "+values[t]+" must be "+n[t]);throw i.name="InvalidValidator",i}}return{isCallback:n,mustBeCallback:t,mustBe:o,validate:i}}t.$inject=["$q"],Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=t},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={DB_ERROR:"cb.error"}},function(e,n){"use strict";function t(){"ngInject";function e(e){function n(){if(o.length){var e=o.shift();e.apply(null,r.resultArgs),i.push(e),n()}}function t(){if(u.length){var e=u.shift();e.apply(null,r.error),c.push(e),t()}}var r=this,o=[],i=[],u=[],c=[];r.promise={},r.$resolved=!1,r.resolve=function(){r.$resolved||(r.$resolved=!0,r.resultArgs=Array.prototype.slice.call(arguments),n())},r.reject=function(e){r.$resolved||(r.$resolved=!0,r.error=e||{},t())},r.promise.then=function(e){return o.push(e),r.resolved&&!r.error&&n(),r},r.promise.catch=function(e){return u.push(e),r.resolved&&r.error&&t(),r},r.promise.done=function(e){return o.push(function(){e.apply(null,[null].concat(r.resultArgs))}),u.push(function(){e.apply(null,r.error)}),r.resolved&&(r.error?t():n()),r},e&&r.promise.done(e)}return e.defer=function(n){return new e(n)},e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(e,n,t,r,o){"ngInject";var i=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;return i?function(u,c){var a=this;t.validate(arguments,["string","number"]);var s={},l=e.defer(),f=e.defer(),d=!1,v=null;a.$models={},a.$bind=function(e,n){t.validate(arguments,["string","function"]),s[e]||(s[e]=[]),s[e].push(n)},a.$unbind=function(e,n){if(t.validate(arguments,["string","function"]),s[e]){var r=s[e].indexOf(n);r!=-1&&s[e].splice(r,1)}},a.$trigger=function(e,n){t.validate(arguments,["string","object"]),o.log(u+".v"+(c||1)+": "+e);for(var r in s[e])s[e][r].apply(a,n)},a.$error=function(e){return a.$bind(r.DB_ERROR,e),a},a.$open=function(){if(d)return f;d=!0;var e=i.open(u,c);return e.onupgradeneeded=function(n){l.resolve(n,e)},e.onsuccess=function(n){v=e,v.onerror=function(e){o.error("Database error: "+e.target.errorCode),a.$trigger(r.DB_ERROR,[e])},f.resolve(n,e)},e.onerror=function(n){f.reject(e.errorCode)},f},a.$model=function(e){t.validate(arguments,["string"]);var r=a.$models[e];return r||(r=n(a,e)),a.$models[e]=r,r},a.$createStore=function(e,n){t.validate(arguments,["string",["object","undefined"]]),l.promise.then(function(t,r){r.result.createObjectStore(e,n)})},a.$createIndex=function(e,n,r,o){t.validate(arguments,["string","string","string",["object","undefined"]]),l.promise.then(function(t,i){var u=i.transaction.objectStore(e);u.createIndex(n,r,o)})},a.$transaction=function(n,r,o,i){t.validate(arguments,["string","string","function",["function","undefined"]]);var u=e.defer(i);return f.promise.then(function(e,t){var i=t.result.transaction(n,r),c=o(i);i.oncomplete=function(e){u.resolve(e,c)},i.onabort=function(){u.reject(i.error)}}),u},a.$create=function(n,r,o){t.validate(arguments,["string",["object","function"],["function","undefined"]]);var i=e.defer(o);a.$transaction(n,"readonly",function(e){var t=e.objectStore(n).put(r);t.onsuccess=function(e){i.resolve(e,r)},t.onerror=function(){i.reject(t)}})},a.$find=function(n,r,o,i){t.validate(arguments,["function","string",["object","undefined"],"function"]);var u=(e.defer(i),[]);a.$transaction(r,"readonly",function(e){var t=e.objectStore(r),o=t.openCursor();o.onsuccess=function(){var e=o.result;e?(u.push(n.$get(e.value)),e.continue()):console.log(u)}})};var p=void 0;Object.keys(p={$onOpen:f,$onUpgradeNeeded:l}).map(function(e){p[e].promise.done(function(n){var t=u+".v"+(c||1)+": "+e;n?o.error(t,n):o.log(t)}),a[e]=function(n){return t.validate(arguments,["function"]),p[e].promise.done(n),a}})}:void alert("Su navegador no soporta una versión estable de indexedDB. Tal y como las características no serán validas")}t.$inject=["$qs","$iModel","$ngDbUtils","$ngDbEvents","$log"],Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(e,n){"ngInject";return function(t,r){function o(){this.$constructor.apply(this,arguments)}var i={keyPath:"id",autoIncrement:!0},u={};return o.$id=function(e){return n.validate(arguments,["object"]),i=e,o},o.$createStore=function(){return t.$createStore(r,i),o},o.$index=function(e,n,i){return t.$createIndex(r,e,n,i),o},o.$build=function(e){return n.validate(arguments,["function"]),e(o),o},o.$create=function(t,r){if(n.validate(arguments,["object",["function","undefined"]]),void 0===t.length){var i=new o(t);return i.$create(r)}var u=Array.prototype.slice.call(t),c=[],a=e.defer(r);return function e(){return 0==u.length?a.resolve(c):void o.$create(u.shift(),function(n,t){return n?a.reject(n):(c.push(t),void e())})}(),a},o.searchDeepField=function(e,t,r){n.validate(arguments,["object","string",["function","undefined"]]);var o=t.split("."),i=o.pop();return function e(n){if(0==o.length)return r(n,i);var t=o.shift();return"undefined"==typeof n[t]&&(n[t]={}),e(n[t])}(e)},o.$get=function(e){n.validate(arguments,["object"]);var t=o.searchDeepField(e,i.keyPath,function(e,n){return e[n]});return u[t]||(u[t]=new o(e)),u[t]},o.$find=function(e,n){var i=Array.prototype.slice.call(arguments);return n=i.pop(),e=i.pop(),t.$find(o,r,e,n)},o.prototype.$setAttributes=function(e){var t=this;n.validate(arguments,["object"]),Object.keys(e).map(function(n){t.$set(n,e[n])})},o.prototype.$get=function(e){var n=this;return o.searchDeepField(n,e,function(e,n){return e[n]})},o.prototype.$set=function(e,n){var t=this;return o.searchDeepField(t,e,function(e,r){return e[r]=n,t})},o.prototype.$constructor=function(e){},o.prototype.$create=function(e){var n=this;return t.$create(r,this,function(t,r){return t?void(e&&e(t)):(n.$set(i.keyPath,r.target.result),u[n.$get(i.keyPath)]=n,void(e&&e.apply(null,[null].concat(Array.prototype.slice.call(arguments)))))})},o}}t.$inject=["$qs","$ngDbUtils"],Object.defineProperty(n,"__esModule",{value:!0}),n.default=t}]);