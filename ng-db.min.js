!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=t(1),i=r(o),u=t(2),c=r(u),a=t(3),s=r(a),l=t(4),f=r(l),d=t(5),v=r(d);angular.module("ngDb",[]).constant("NG_DB_VERSION","0.0.1").service("$ngDbEvents",function(){return c.default}).service("$ngDbUtils",i.default).service("$qs",s.default).service("$iDb",f.default).service("$iModel",v.default)},function(e,n){"use strict";function t(e){"ngInject";function n(e,n){return"function"==typeof e||null==e||void 0==e}function t(e){if(!n(e)){var t=new Error("Invalid callback");throw t.name="InvalidCallback",t}}function o(e,n){"string"==typeof n&&(n=[n]);for(var t in n)if(("undefined"==typeof e?"undefined":r(e))==n[t])return;var o=new Error("Invalid value: "+e+" must be "+n.join(" or "));throw o.name="InvalidValue",o}function i(e,n){e=Array.prototype.slice.call(e),"string"==typeof n&&(n=[n]);for(var t in e)if(n[t]){if(null==n[t])continue;if("string"==typeof n[t]||"object"==r(n[t])){o(e[t],n[t]);continue}if("funcion"==typeof n[t]){n[t](e[t]);continue}var i=new Error("Invalid validator to: "+values[t]+" must be "+n[t]);throw i.name="InvalidValidator",i}}return{isCallback:n,mustBeCallback:t,mustBe:o,validate:i}}t.$inject=["$q"],Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=t},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={DB_ERROR:"cb.error"}},function(e,n){"use strict";function t(){"ngInject";function e(){function e(){if(r.length){var n=r.shift();n.apply(null,t.resultArgs),e()}}function n(){if(o.length){var e=o.shift();e.apply(null,t.error),n()}}var t=this,r=[],o=[];t.promise={},t.$resolved=!1,t.resolve=function(){t.$resolved||(t.$resolved=!0,t.resultArgs=Array.prototype.slice.call(arguments),e())},t.reject=function(e){t.$resolved||(t.$resolved=!0,t.error=e||{},n())},t.promise.then=function(n){return r.push(n),t.resolved&&!t.error&&e(),t},t.promise.catch=function(e){return o.push(e),t.resolved&&t.error&&n(),t},t.promise.done=function(i){return r.push(function(){i.apply(null,[null].concat(t.resultArgs))}),o.push(function(){i.apply(null,t.error)}),t.resolved&&(t.error?n():e()),t}}return e.defer=function(n){return new e(n)},e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(e,n,t,r,o){"ngInject";var i=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;return i?function(u,c){var a=this;t.validate(arguments,["string","number"]);var s={},l=e.defer(),f=e.defer(),d=!1,v=null;a.$models={},a.$bind=function(e,n){t.validate(arguments,["string","function"]),s[e]||(s[e]=[]),s[e].push(n)},a.$unbind=function(e,n){if(t.validate(arguments,["string","function"]),s[e]){var r=s[e].indexOf(n);r!=-1&&s[e].splice(r,1)}},a.$trigger=function(e,n){t.validate(arguments,["string","object"]),o.log(u+".v"+(c||1)+": "+e);for(var r in s[e])s[e][r].apply(a,n)},a.$error=function(e){return a.$bind(r.DB_ERROR,e),a},a.$open=function(){if(d)return f;d=!0;var e=i.open(u,c);return e.onupgradeneeded=function(n){l.resolve(n,e)},e.onsuccess=function(n){v=e,v.onerror=function(e){o.error("Database error: "+e.target.errorCode),a.$trigger(r.DB_ERROR,[e])},f.resolve(n,e)},e.onerror=function(n){f.reject(e.errorCode)},f},a.$model=function(e){t.validate(arguments,["string"]);var r=a.$models[e];return r||(r=n(a,e)),a.$models[e]=r,r},a.$createStore=function(e,n){t.validate(arguments,["string",["object","undefined"]]),l.promise.then(function(t,r){var o=r.result;o.createObjectStore(e,n)})},a.$createIndex=function(e,n,r,o){t.validate(arguments,["string","string","string",["object","undefined"]]),l.promise.then(function(t){var i=(request.result,request.transaction.objectStore(e));i.createIndex(n,r,o)})},a.$transaction=function(n,r,o,i){t.validate(arguments,["string","string","function",["function","undefined"]]);var u=e.defer(i);return f.promise.then(function(e,t){var i=t.result.transaction(n,r),c=o(i);i.oncomplete=function(e){u.resolve([e,c])},i.onabort=function(){u.reject(i.error)}}),u},a.$create=function(n,r,o){t.validate(arguments,["string",["object","function"],["function","undefined"]]);var i=e.defer(o);a.$transaction(n,"readwrite",function(e){var t=e.objectStore(n).put(r);t.onsuccess=function(e){console.log("onsuccess",e.target.result),i.resolve([e,r])},t.onerror=function(){i.reject(t)}})};var p=void 0;Object.keys(p={$onOpen:f,$onUpgradeNeeded:l}).map(function(e){p[e].promise.done(function(n){var t=u+".v"+(c||1)+": "+e;n?o.error(t,n):o.log(t)}),a[e]=function(n){return t.validate(arguments,["function"]),p[e].promise.done(n),a}})}:void alert("Su navegador no soporta una versión estable de indexedDB. Tal y como las características no serán validas")}t.$inject=["$qs","$iModel","$ngDbUtils","$ngDbEvents","$log"],Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n){"use strict";function t(e,n){"ngInject";return function(t,r){function o(){this.$constructor.apply(this,arguments)}var i={keyPath:"id",autoIncrement:!0};return o.prototype.$setAttributes=function(e){var t=this;n.validate(arguments,["object"]),Object.keys(e).map(function(n){t[n]=e[n]})},o.prototype.$constructor=function(e){},o.$id=function(e){return i=e,o},o.$createStore=function(){return t.$createStore(r,i),o},o.$index=function(e,n,i){return t.$createIndex(r,e,n,i),o},o.$build=function(e){return e(o),o},o.$create=function(n,t){if(void 0===n.length){var r=new o(n);return r.$create(t)}var i=Array.prototype.slice.call(n),u=[],c=e.defer(t);return function e(){return 0==i.length?c.resolve(u):void o.$create(i.shift(),function(n,t){return n?c.reject(n):(u.push(t),void e())})}(),c},o.prototype.$create=function(e){return t.$create(r,this,e)},o}}t.$inject=["$qs","$ngDbUtils"],Object.defineProperty(n,"__esModule",{value:!0}),n.default=t}]);